"use strict";(self.webpackChunk_lodestar_docs=self.webpackChunk_lodestar_docs||[]).push([[6084],{9894:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var a=t(4848),r=t(8453);const o={},s="Prometheus and Grafana",i={id:"run/logging-and-metrics/prometheus-grafana",title:"Prometheus and Grafana",description:"Prometheus is an open-source monitoring system with efficient time series database and a modern alerting approach. Together with Grafana it's the recommended way to make sure that your node and validator(s) are performing correctly.",source:"@site/pages/run/logging-and-metrics/prometheus-grafana.md",sourceDirName:"run/logging-and-metrics",slug:"/run/logging-and-metrics/prometheus-grafana",permalink:"/lodestar/run/logging-and-metrics/prometheus-grafana",draft:!1,unlisted:!1,editUrl:"https://github.com/ChainSafe/lodestar/tree/unstable/docs/pages/run/logging-and-metrics/prometheus-grafana.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"External Signer",permalink:"/lodestar/run/validator-management/external-signer"},next:{title:"Client monitoring",permalink:"/lodestar/run/logging-and-metrics/client-monitoring"}},d={},l=[{value:"Prometheus",id:"prometheus",level:2},{value:"Grafana",id:"grafana",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"prometheus-and-grafana",children:"Prometheus and Grafana"}),"\n",(0,a.jsx)(n.p,{children:"Prometheus is an open-source monitoring system with efficient time series database and a modern alerting approach. Together with Grafana it's the recommended way to make sure that your node and validator(s) are performing correctly."}),"\n",(0,a.jsx)(n.h2,{id:"prometheus",children:"Prometheus"}),"\n",(0,a.jsxs)(n.p,{children:["To start, download Prometheus from ",(0,a.jsx)(n.a,{href:"https://prometheus.io/download/",children:"https://prometheus.io/download/"}),".\nUnzip the downloaded .zip file and run Prometheus from its installed location with the lodestar ",(0,a.jsx)(n.code,{children:"prometheus.yml"})," passed in as the configuration file"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"./prometheus --config.file=$dataDir/prometheus.yml\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsxs)(n.p,{children:["8008 is also the default port specified in the ",(0,a.jsx)(n.code,{children:"prometheus.yml"})," in the lodestar repository"]})}),"\n",(0,a.jsx)(n.p,{children:"Then run the Lodestar beacon node with"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"lodestar --metrics=true --metrics.port=8008\n"})}),"\n",(0,a.jsxs)(n.p,{children:["Navigate to ",(0,a.jsx)(n.a,{href:"http://localhost:9090/",children:"http://localhost:9090/"})," in your browser to verify that Prometheus is monitoring Lodestar"]}),"\n",(0,a.jsx)(n.h2,{id:"grafana",children:"Grafana"}),"\n",(0,a.jsxs)(n.p,{children:["Download and install Grafana from its official repository ",(0,a.jsx)(n.a,{href:"https://grafana.com/docs/grafana/latest/installation/debian/",children:"https://grafana.com/docs/grafana/latest/installation/debian/"})]}),"\n",(0,a.jsxs)(n.p,{children:["Add Prometheus as a data source to Grafana ",(0,a.jsx)(n.a,{href:"https://prometheus.io/docs/visualization/grafana/#installing",children:"https://prometheus.io/docs/visualization/grafana/#installing"})]}),"\n",(0,a.jsx)(n.p,{children:"An example of relevant metrics of interest to monitor are:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"nodejs_heap_space_size_used_bytes"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"nodejs_eventloop_lag_seconds"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"beaconchain_peers"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"beaconchain_current_slot"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"beaconchain_current_finalized_epoch"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>i});var a=t(6540);const r={},o=a.createContext(r);function s(e){const n=a.useContext(o);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);