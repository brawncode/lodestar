<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-run/beacon-management/networking" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.2.0">
<title data-rh="true">Lodestar Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://chainsafe.github.io/lodestar/run/beacon-management/networking"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Networking | Lodestar"><meta data-rh="true" name="description" content="Lodestar will automatically connect to peers on the network. Peers are found through the discv5 protocol and once peers are established communications happen via gossipsub over libp2p. While not necessary, having a basic understanding of how the various protocols and transports work will help with debugging and troubleshooting as some of the more common challenges come up with firewalls and NAT traversal."><meta data-rh="true" property="og:description" content="Lodestar will automatically connect to peers on the network. Peers are found through the discv5 protocol and once peers are established communications happen via gossipsub over libp2p. While not necessary, having a basic understanding of how the various protocols and transports work will help with debugging and troubleshooting as some of the more common challenges come up with firewalls and NAT traversal."><link data-rh="true" rel="icon" href="/lodestar/images/favicon.ico"><link data-rh="true" rel="canonical" href="https://chainsafe.github.io/lodestar/run/beacon-management/networking"><link data-rh="true" rel="alternate" href="https://chainsafe.github.io/lodestar/run/beacon-management/networking" hreflang="en"><link data-rh="true" rel="alternate" href="https://chainsafe.github.io/lodestar/run/beacon-management/networking" hreflang="x-default"><script src="https://plausible.io/js/script.js" defer="defer" data-domain="chainsafe.github.io/lodestar"></script><link rel="stylesheet" href="/lodestar/assets/css/styles.79b491cb.css">
<script src="/lodestar/assets/js/runtime~main.ac65c388.js" defer="defer"></script>
<script src="/lodestar/assets/js/main.e2ca73f1.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/lodestar/"><div class="navbar__logo"><img src="/lodestar/images/logo.png" alt="Lodestar Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/lodestar/images/logo.png" alt="Lodestar Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Lodestar Documentation</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/ChainSafe/lodestar" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lodestar/">Home</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lodestar/introduction">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lodestar/security">Security Policy</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/lodestar/run/getting-started/installation">Run A Node</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lodestar/run/getting-started/installation">Install Options</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/lodestar/run/getting-started/quick-start">Quick Start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/lodestar/run/beacon-management/starting-a-node">Beacon Node</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lodestar/run/beacon-management/starting-a-node">Starting a Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lodestar/run/beacon-management/beacon-cli">CLI Reference</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lodestar/run/beacon-management/data-retention">Data Retention</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/lodestar/run/beacon-management/networking">Networking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lodestar/run/beacon-management/mev-and-builder-integration">MEV and Builder Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/lodestar/run/beacon-management/syncing">Syncing</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/lodestar/run/validator-management/vc-configuration">Validator Client</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/lodestar/run/logging-and-metrics/prometheus-grafana">Logging and Metrics</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/lodestar/run/bootnode/bootnode-cli">Discv5 Bootnode</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/lodestar/libraries/lightclient-prover/lightclient">Developer Tools</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/lodestar/libraries/lightclient-prover/lightclient">Light Client</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/lodestar/libraries/lightclient-prover/prover">Prover</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lodestar/supporting-libraries/">Supporting Libraries</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="true" href="/lodestar/contribution/getting-started">Contributing</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lodestar/contribution/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/lodestar/contribution/advanced-topics/setting-up-a-testnet">Advanced Topics</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/lodestar/contribution/depgraph">Dependency Graph</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/lodestar/contribution/dev-cli">Development Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/lodestar/contribution/testing/">Testing</a></div></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/lodestar/faqs">Frequently Asked Questions</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/lodestar/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Run A Node</span><meta itemprop="position" content="1"></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Beacon Node</span><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Networking</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Networking</h1>
<p>Lodestar will automatically connect to peers on the network. Peers are found through the discv5 protocol and once peers are established communications happen via gossipsub over libp2p. While not necessary, having a basic understanding of how the various protocols and transports work will help with debugging and troubleshooting as some of the more common challenges come up with <a href="#firewall-management">firewalls</a> and <a href="#nat-traversal">NAT traversal</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="networking-flags">Networking Flags<a href="#networking-flags" class="hash-link" aria-label="Direct link to Networking Flags" title="Direct link to Networking Flags">​</a></h2>
<p>Some of the important Lodestar flags related to networking are:</p>
<ul>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--discv5"><code>--discv5</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--listenaddress"><code>--listenAddress</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--port"><code>--port</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--discoveryport"><code>--discoveryPort</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--listenaddress6"><code>--listenAddress6</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--port6"><code>--port6</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--discoveryport6"><code>--discoveryPort6</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--bootnodes"><code>--bootnodes</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--subscribeallsubnets"><code>--subscribeAllSubnets</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--disablepeerscoring"><code>--disablePeerScoring</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--enrip"><code>--enr.ip</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--enrtcp"><code>--enr.tcp</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--enrudp"><code>--enr.udp</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--enrip6"><code>--enr.ip6</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--enrtcp6"><code>--enr.tcp6</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--enrudp6"><code>--enr.udp6</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--nat"><code>--nat</code></a></li>
<li><a href="/lodestar/run/beacon-management/beacon-cli#--private"><code>--private</code></a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="peer-discovery-discv5">Peer Discovery (Discv5)<a href="#peer-discovery-discv5" class="hash-link" aria-label="Direct link to Peer Discovery (Discv5)" title="Direct link to Peer Discovery (Discv5)">​</a></h2>
<p>In Ethereum, discv5 plays a pivotal role in the peer discovery process, facilitating nodes to find and locate each other in order to form the peer-to-peer network​. The process begins with an interaction between new nodes and bootnodes at start-up. Bootnodes are nodes with hard-coded addresses, or can be overridden via the cli flag <a href="/lodestar/run/beacon-management/beacon-cli#--bootnodes"><code>--bootnodes</code></a>, to bootstrap the discovery process​. Through a method called FINDNODE-NODES, a new node establishes a bond with each bootnode, and it returns a list of peers for the new node to connect to. Following this trail, the new node engages through FINDNODE-NODES with the provided peers to further establish a web of connections​.</p>
<p>Discv5 operates as a peer advertisement medium in this network, where nodes can act as both providers and consumers of data. Every participating node in the Discv5 protocol discovers peer data from other nodes and later relays it, making the discovery process dynamic and efficient​.</p>
<p>Discv5 is designed to be a standalone protocol running via UDP on a dedicated port solely for peer discovery. Peer data is exchanged via self-certified, flexible peer records (ENRs). These key features cater to the Ethereum network​ and being a good peer often means running a discv5 worker​. Lodestar offers simple configuration to setup and run a bootnode independently of a beacon node. See the <a href="/lodestar/run/bootnode/bootnode-cli">bootnode cli</a> page for more information and configuration options.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="enr">ENR<a href="#enr" class="hash-link" aria-label="Direct link to ENR" title="Direct link to ENR">​</a></h2>
<p>Ethereum Node Records (ENRs) are a standardized format utilized for peer discovery - see <a href="https://eips.ethereum.org/EIPS/eip-778" target="_blank" rel="noopener noreferrer">EIP-778</a> for the specification. An ENR consists of a set of key-value pairs. These pairs include crucial information such as the node&#x27;s ID, IP address, the port on which it&#x27;s listening, and the protocols it supports. This information helps other nodes in the network locate and connect to the node.</p>
<p>The primary purpose of ENRs is to facilitate node discovery and connectivity in the Ethereum network. Nodes use ENRs to announce their presence and capabilities to other nodes, making it easier to establish and maintain a robust, interconnected network.</p>
<p>Note that bootnodes are announced via ENR.</p>
<p>Lodestar prints out its own ENR on startup, the logs will show something similar to the following</p>
<div class="language-txt codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-txt codeBlock_bY9V thin-scrollbar" style="color:#000000;background-color:#ffffff"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">info: discv5 worker started peerId=16Uiu...t9LQ3, initialENR=enr:-Iu4QGE...WRwgiMo, bindAddr4=/ip4/0.0.0.0/udp/9000</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Alternatively, the ENR can also be retrieved from the beacon node API by querying the <a href="https://ethereum.github.io/beacon-APIs/#/Node/getNetworkIdentity" target="_blank" rel="noopener noreferrer">getNetworkIdentity</a> endpoint.</p>
<p><a href="https://enr-viewer.com/" target="_blank" rel="noopener noreferrer">ENR Viewer</a> provides a simple and convenient option to decode and inspect ENRs.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="peer-communication-gossipsub-and-reqresp">Peer Communication (gossipsub and Req/Resp)<a href="#peer-communication-gossipsub-and-reqresp" class="hash-link" aria-label="Direct link to Peer Communication (gossipsub and Req/Resp)" title="Direct link to Peer Communication (gossipsub and Req/Resp)">​</a></h2>
<p>Gossipsub and Req/Resp are the two mechanisms that beacon nodes use to exchange chain data. Gossipsub is used disseminate the most recent relevant data proactively throughout the network. Req/Resp is used to directly ask specific peers for specific information (eg: during syncing).</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="gossipsub">Gossipsub<a href="#gossipsub" class="hash-link" aria-label="Direct link to Gossipsub" title="Direct link to Gossipsub">​</a></h3>
<p>GossipSub is a foundational protocol in peer-to-peer (P2P) communication, particularly decentralized networks like Ethereum and IPFS. At its core, GossipSub efficiently propagates data, filtered by topic, through a P2P network. It organizes peers into a collection of overlay networks, each associated with a distinct topic. By routing data through relevant overlay networks based on topics of interest, large amounts of data can be efficiently disseminated without excessive bandwidth, latency, etc.</p>
<p>In GossipSub, nodes can subscribe to topics, effectively joining the corresponding overlay to receive messages published to a specific topic. This topic-based structure enables nodes to congregate around shared interests, ensuring that relevant messages are delivered to all interested parties. Each message published to a topic gets disseminated and relayed to all subscribed peers, similar to a chat room.</p>
<p>Messages are propagated through a blend of eager-push and lazy-pull models. Specifically, the protocol employs &quot;mesh links&quot; to carry full messages actively and &quot;gossip links&quot; to carry only message identifiers (lazy-pull propagation model). This hybrid approach allows for both active message propagation and reactive message retrieval​ which is an extension of the traditional hub-and-spoke pub/sub model.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reqresp">Req/Resp<a href="#reqresp" class="hash-link" aria-label="Direct link to Req/Resp" title="Direct link to Req/Resp">​</a></h3>
<p>Req/Resp is the domain of protocols that establish a flexible, on-demand mechanism to retrieve historical data and data missed by gossip. This family of methods, implemented as separate libp2p protocols, operate between a single requester and responder. A method is initiated via a libp2p protocol ID, with the initiator sending a request message and the responder sending a response message. Every method defines a specific request and response message type, and a specific protocol ID. This framework also facilitates streaming responses and robust error handling.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-transport-libp2p">Data Transport (libp2p)<a href="#data-transport-libp2p" class="hash-link" aria-label="Direct link to Data Transport (libp2p)" title="Direct link to Data Transport (libp2p)">​</a></h2>
<p>Libp2p is a modular and extensible network stack that serves as the data transport layer below both gossipsub and Req/Resp and facilitates the lower-level peer-to-peer communications. It provides a suite of protocols for various networking functionalities including network transports, connection encryption and protocol multiplexing. Its modular design allows for the easy addition, replacement, or upgrading of protocols, ensuring an adaptable and evolving networking stack.</p>
<p>Libp2p operates at the lower levels of the OSI model, particularly at the Transport and Network layers. Libp2p supports both TCP and UDP protocols for establishing connections and data transmission. Combined with libp2p&#x27;s modular design it can integrate with various networking technologies to facilitating both routing and addressing.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="firewall-management">Firewall Management<a href="#firewall-management" class="hash-link" aria-label="Direct link to Firewall Management" title="Direct link to Firewall Management">​</a></h2>
<p>If your setup is behind a firewall there are a few ports that will need to be opened to allow for P2P discovery and communication. There are also some ports that need to be protected to prevent unwanted access or DDOS attacks on your node.</p>
<p>Ports that must be opened:</p>
<ul>
<li>30303/TCP+UDP - Execution layer P2P communication port</li>
<li>9000/TCP+UDP - Beacon node IPv4 P2P communication port</li>
<li>9090/TCP+UDP - Beacon node IPv6 P2P communication port</li>
</ul>
<p>Ports that must be protected:</p>
<ul>
<li>9596/TCP - Beacon node REST API port</li>
<li>5062/TCP - Validator key manager API port</li>
<li>18550/TCP - MEV-Boost/Builder port</li>
<li>8008/TCP - Beacon node metrics port</li>
<li>5064/TCP - Validator metrics port</li>
<li>8545/TCP - Execution client JSON RPC port</li>
<li>8551/TCP - Execution engine port for Lodestar to communicate with the execution client</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="nat-traversal">NAT Traversal<a href="#nat-traversal" class="hash-link" aria-label="Direct link to NAT Traversal" title="Direct link to NAT Traversal">​</a></h2>
<p>Lodestar does not support UPnP. If you are behind a NAT you will need to manually forward the ports listed above.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/ChainSafe/lodestar/tree/unstable/docs/pages/run/beacon-management/networking.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/lodestar/run/beacon-management/data-retention"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Data Retention</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/lodestar/run/beacon-management/mev-and-builder-integration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">MEV and Builder Integration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#networking-flags" class="table-of-contents__link toc-highlight">Networking Flags</a></li><li><a href="#peer-discovery-discv5" class="table-of-contents__link toc-highlight">Peer Discovery (Discv5)</a></li><li><a href="#enr" class="table-of-contents__link toc-highlight">ENR</a></li><li><a href="#peer-communication-gossipsub-and-reqresp" class="table-of-contents__link toc-highlight">Peer Communication (gossipsub and Req/Resp)</a><ul><li><a href="#gossipsub" class="table-of-contents__link toc-highlight">Gossipsub</a></li><li><a href="#reqresp" class="table-of-contents__link toc-highlight">Req/Resp</a></li></ul></li><li><a href="#data-transport-libp2p" class="table-of-contents__link toc-highlight">Data Transport (libp2p)</a></li><li><a href="#firewall-management" class="table-of-contents__link toc-highlight">Firewall Management</a></li><li><a href="#nat-traversal" class="table-of-contents__link toc-highlight">NAT Traversal</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__links text--center"><div class="footer__links"><a href="https://lodestar.chainsafe.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">Lodestar Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://discord.com/invite/yjyvFRP" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://x.com/lodestar_eth" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter/X<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><span class="footer__link-separator">·</span><a href="https://github.com/ChainSafe/lodestar" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 ChainSafe. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>